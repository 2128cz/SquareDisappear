{"version":3,"sources":["assets\\scripts\\IceEffectSc.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class IceEffectSc extends cc.Component {\r\n\r\n    @property(cc.Prefab)\r\n    icePrefab: cc.Prefab = null;\r\n    @property(cc.Node)\r\n    ice: cc.Node = null;\r\n\r\n    @property([cc.SpriteFrame])\r\n    frames: cc.SpriteFrame[] = [];\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        for (let i = 0; i < 20; i++) {\r\n            let sprite = cc.instantiate(this.icePrefab);\r\n            let frame = this.frames.shift();\r\n            sprite.getComponent(cc.Sprite).spriteFrame = frame;\r\n            this.frames.push(frame);\r\n            sprite.x = Math.random() * 720 - 360;\r\n            sprite.y = Math.random() * 1280 - 640;\r\n            this.node.addChild(sprite);\r\n            sprite[\"speed\"] = Math.random() * 100 + 50;\r\n        }\r\n        this.node.active = false;\r\n    }\r\n    private overtime = 0;\r\n    showIecEffect(overtime) {\r\n        this.overtime = overtime;\r\n        for (let item of this.node.children) {\r\n            if (item == this.ice) {\r\n                item.scale = 0.01;\r\n                item.opacity = 255;\r\n            } else {\r\n                item.opacity = 0;\r\n                item.runAction(cc.fadeTo(0.3, 200))\r\n            }\r\n        }\r\n\r\n        this.ice.runAction(cc.sequence(\r\n            cc.scaleTo(0.2,10, 10),\r\n            cc.fadeTo(0, 0)\r\n        ));\r\n\r\n    }\r\n\r\n    update(dt) {\r\n        if (!this.node.active) {\r\n            return;\r\n        }\r\n        for (let item of this.node.children) {\r\n            if (item == this.ice) {\r\n                continue;\r\n            }\r\n            item.y -= dt * item[\"speed\"];\r\n            if (item.y <= -1280 / 2) {\r\n                item.y = 1280 / 2;\r\n            }\r\n        }\r\n        this.overtime -= dt;\r\n        if (this.overtime <= 0) {\r\n            this.node.active = false;\r\n        }\r\n    }\r\n}\r\n"]}