{"version":3,"sources":["assets\\scripts\\game\\effect\\ButtonSkill.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { DevelopersToolGlobal as ccvv } from \"../../base/class/DevelopersToolGlobal\";\r\nimport ss from \"../Setting\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n\r\n    @property({ type: cc.Sprite })\r\n    maskList: cc.Sprite[] = [];\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    onEnable() {\r\n        // 默认CD是满的\r\n        this.iceCD = this.getCDT(this.ice);\r\n        this.hitCD = this.getCDT(this.hit);\r\n        this.boomCD = this.getCDT(this.boom);\r\n    }\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    update(dt) {\r\n        this.skillNameList.forEach(element => {\r\n            if (this.getCD(element) > 0) {\r\n                this.setCD(element, -dt);\r\n            }\r\n        });\r\n    }\r\n\r\n    // tag 用户脚本 \r\n\r\n\r\n    // tag 按钮事件 \r\n\r\n    onButtonClick(event, cusData) {\r\n        // event.target\r\n        this[cusData]();\r\n    }\r\n\r\n    onIce(): void {\r\n        this.BottonEvent(this.ice);\r\n    }\r\n    onHit(): void {\r\n        this.BottonEvent(this.hit);\r\n    }\r\n    onBoom(): void {\r\n        this.BottonEvent(this.boom)\r\n    }\r\n\r\n    BottonEvent(name: string) {\r\n        if (this.getCD(this[name]) <= 0) {\r\n            this.setCD(this[name], this.getCDT(this[name]));\r\n            ss.SkillEvent = name;\r\n        }\r\n    }\r\n\r\n\r\n    // tag 宏和参数定义 \r\n\r\n    protected get iceMask() { return this.maskList[0] }\r\n    protected get hitMask() { return this.maskList[1] }\r\n    protected get boomMask() { return this.maskList[2] }\r\n\r\n    protected iceCD: number = this.getCDT(this.ice);\r\n    protected hitCD: number = this.getCDT(this.hit);\r\n    protected boomCD: number = this.getCDT(this.boom);\r\n\r\n    protected getCD(name: string) {\r\n        return this[name + 'CD']\r\n    }\r\n    protected setCD(name: string, offset: number) {\r\n        this[name + 'CD'] += offset;\r\n        this[name + 'CD'] = Math.max(Math.min(this[name + 'CD'], this.getCDT(name)), 0)\r\n        this.getMask(name).fillRange = this[name + 'CD'] / this.getCDT(name);\r\n        return this[name + 'CD']\r\n    }\r\n\r\n    protected getCDT(name: string) {\r\n        return ss[name + '_CoolDownTime']\r\n    }\r\n\r\n    protected getMask(name: string): cc.Sprite {\r\n        return this[name + 'Mask']\r\n    }\r\n\r\n    protected get ice() { return 'ice' }\r\n    protected get hit() { return 'hit' }\r\n    protected get boom() { return 'boom' }\r\n\r\n    protected get skillNameList() { return [this.ice, this.hit, this.boom] }\r\n\r\n}\r\n"]}