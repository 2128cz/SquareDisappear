{"version":3,"sources":["assets\\scripts\\CheckOverSc.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,mCAA8B;AAC9B,qCAAgC;AAChC,2CAAsC;AACtC,iCAAgC;AAE1B,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAyC,+BAAY;IAArD;QAAA,qEA6CC;QAzCG,YAAM,GAAY,IAAI,CAAC;QAEvB,cAAQ,GAAY,IAAI,CAAC;;IAuC7B,CAAC;IAtCG,wBAAwB;IAExB,eAAe;IAEf,2BAAK,GAAL;IAEA,CAAC;IAED,4BAAM,GAAN,UAAO,EAAE;QACL,IAAI,IAAI,CAAC,YAAY,CAAC,gBAAM,CAAC,CAAC,QAAQ,EAAE;YACpC,OAAO;SACV;QACD,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;YACnB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,gBAAM,CAAC,CAAC,WAAW,CAAC;SAC5D;aAAM;YACH,KAAiB,UAAyB,EAAzB,KAAA,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAzB,cAAyB,EAAzB,IAAyB,EAAE;gBAAvC,IAAI,IAAI,SAAA;gBACT,IAAI,IAAI,CAAC,YAAY,CAAC,iBAAO,CAAC,CAAC,SAAS,IAAI,CAAC,EAAE;oBAC3C,IAAI,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE;wBAC7C,EAAE;wBACF,IAAI,CAAC,YAAY,CAAC,gBAAM,CAAC,CAAC,QAAQ,GAAG,IAAI,CAAC;wBAC1C,IAAI,CAAC,WAAW,EAAE,CAAC;wBACnB,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC;wBAC1B,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,oBAAU,CAAC,CAAC,QAAQ,GAAG,EAAE,CAAC;wBACnD,aAAK,CAAC,IAAI,CAAC,aAAK,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;qBACtC;iBACJ;aACJ;SACJ;IACL,CAAC;IACO,iCAAW,GAAnB;QACI,IAAI,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,gBAAM,CAAC,CAAC,WAAW,CAAC;QACnD,KAAK,IAAI,CAAC,GAAG,MAAM,CAAC,aAAa,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;YAChD,IAAI,IAAI,GAAG,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YAC9B,IAAI,IAAI,CAAC,CAAC,GAAG,IAAI,GAAG,CAAC,EAAE;gBACnB,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;aAC/B;SACJ;IACL,CAAC;IAxCD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;+CACK;IAEvB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;iDACO;IANR,WAAW;QAD/B,OAAO;OACa,WAAW,CA6C/B;IAAD,kBAAC;CA7CD,AA6CC,CA7CwC,EAAE,CAAC,SAAS,GA6CpD;kBA7CoB,WAAW","file":"","sourceRoot":"/","sourcesContent":["import GameSc from \"./GameSc\";\nimport BrickSc from \"./BrickSc\";\nimport GameOverSc from \"./GameOverSc\";\nimport { Msger } from \"./Msger\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class CheckOverSc extends cc.Component {\n\n\n    @property(cc.Node)\n    overUI: cc.Node = null;\n    @property(cc.Node)\n    deadLine: cc.Node = null;\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {}\n\n    start() {\n\n    }\n    private bricksLayer: cc.Node;\n    update(dt) {\n        if (this.getComponent(GameSc).isPaused) {\n            return;\n        }\n        if (!this.bricksLayer) {\n            this.bricksLayer = this.getComponent(GameSc).bricksLayer;\n        } else {\n            for (let item of this.bricksLayer.children) {\n                if (item.getComponent(BrickSc).moveSpeed == 0) {\n                    if (item.y - item.height / 2 <= this.deadLine.y) {\n                        //\n                        this.getComponent(GameSc).isPaused = true;\n                        this.cleanBrikes();\n                        this.overUI.active = true;\n                        this.overUI.getComponent(GameOverSc).cooldown = 10;\n                        Msger.emit(Msger.on_play_sound, 3);\n                    }\n                }\n            }\n        }\n    }\n    private cleanBrikes() {\n        let bricks = this.getComponent(GameSc).bricksLayer;\n        for (let i = bricks.childrenCount - 1; i >= 0; i--) {\n            let item = bricks.children[i];\n            if (item.y < 1280 / 2) {\n                item.removeFromParent(true);\n            }\n        }\n    }\n}\n"]}