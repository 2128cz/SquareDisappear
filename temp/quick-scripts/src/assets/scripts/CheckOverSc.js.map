{"version":3,"sources":["assets\\scripts\\CheckOverSc.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,mCAA8B;AAC9B,qCAAgC;AAChC,2CAAsC;AACtC,iCAAgC;AAE1B,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAyC,+BAAY;IAArD;QAAA,qEA6CC;QAzCG,YAAM,GAAY,IAAI,CAAC;QAEvB,cAAQ,GAAY,IAAI,CAAC;;IAuC7B,CAAC;IAtCG,wBAAwB;IAExB,eAAe;IAEf,2BAAK,GAAL;IAEA,CAAC;IAED,4BAAM,GAAN,UAAO,EAAE;QACL,IAAI,IAAI,CAAC,YAAY,CAAC,gBAAM,CAAC,CAAC,QAAQ,EAAE;YACpC,OAAO;SACV;QACD,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;YACnB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,gBAAM,CAAC,CAAC,WAAW,CAAC;SAC5D;aAAM;YACH,KAAiB,UAAyB,EAAzB,KAAA,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAzB,cAAyB,EAAzB,IAAyB,EAAE;gBAAvC,IAAI,IAAI,SAAA;gBACT,IAAI,IAAI,CAAC,YAAY,CAAC,iBAAO,CAAC,CAAC,SAAS,IAAI,CAAC,EAAE;oBAC3C,IAAI,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE;wBAC7C,EAAE;wBACF,IAAI,CAAC,YAAY,CAAC,gBAAM,CAAC,CAAC,QAAQ,GAAG,IAAI,CAAC;wBAC1C,IAAI,CAAC,WAAW,EAAE,CAAC;wBACnB,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC;wBAC1B,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,oBAAU,CAAC,CAAC,QAAQ,GAAG,EAAE,CAAC;wBACnD,aAAK,CAAC,IAAI,CAAC,aAAK,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;qBACtC;iBACJ;aACJ;SACJ;IACL,CAAC;IACO,iCAAW,GAAnB;QACI,IAAI,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,gBAAM,CAAC,CAAC,WAAW,CAAC;QACnD,KAAK,IAAI,CAAC,GAAG,MAAM,CAAC,aAAa,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;YAChD,IAAI,IAAI,GAAG,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YAC9B,IAAI,IAAI,CAAC,CAAC,GAAG,IAAI,GAAG,CAAC,EAAE;gBACnB,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;aAC/B;SACJ;IACL,CAAC;IAxCD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;+CACK;IAEvB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;iDACO;IANR,WAAW;QAD/B,OAAO;OACa,WAAW,CA6C/B;IAAD,kBAAC;CA7CD,AA6CC,CA7CwC,EAAE,CAAC,SAAS,GA6CpD;kBA7CoB,WAAW","file":"","sourceRoot":"/","sourcesContent":["import GameSc from \"./GameSc\";\r\nimport BrickSc from \"./BrickSc\";\r\nimport GameOverSc from \"./GameOverSc\";\r\nimport { Msger } from \"./Msger\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class CheckOverSc extends cc.Component {\r\n\r\n\r\n    @property(cc.Node)\r\n    overUI: cc.Node = null;\r\n    @property(cc.Node)\r\n    deadLine: cc.Node = null;\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start() {\r\n\r\n    }\r\n    private bricksLayer: cc.Node;\r\n    update(dt) {\r\n        if (this.getComponent(GameSc).isPaused) {\r\n            return;\r\n        }\r\n        if (!this.bricksLayer) {\r\n            this.bricksLayer = this.getComponent(GameSc).bricksLayer;\r\n        } else {\r\n            for (let item of this.bricksLayer.children) {\r\n                if (item.getComponent(BrickSc).moveSpeed == 0) {\r\n                    if (item.y - item.height / 2 <= this.deadLine.y) {\r\n                        //\r\n                        this.getComponent(GameSc).isPaused = true;\r\n                        this.cleanBrikes();\r\n                        this.overUI.active = true;\r\n                        this.overUI.getComponent(GameOverSc).cooldown = 10;\r\n                        Msger.emit(Msger.on_play_sound, 3);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    private cleanBrikes() {\r\n        let bricks = this.getComponent(GameSc).bricksLayer;\r\n        for (let i = bricks.childrenCount - 1; i >= 0; i--) {\r\n            let item = bricks.children[i];\r\n            if (item.y < 1280 / 2) {\r\n                item.removeFromParent(true);\r\n            }\r\n        }\r\n    }\r\n}\r\n"]}