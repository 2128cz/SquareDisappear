{"version":3,"sources":["assets\\scripts\\SplinteringConctrollerSc.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,iCAAgC;AAChC,2CAAsC;AAEtC,oBAAoB;AACpB,kFAAkF;AAClF,yFAAyF;AACzF,mBAAmB;AACnB,4FAA4F;AAC5F,mGAAmG;AACnG,8BAA8B;AAC9B,4FAA4F;AAC5F,mGAAmG;AAE7F,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAsD,4CAAY;IAAlE;QAEI,wBAAwB;QAF5B,qEAuCC;QAlCG,iBAAW,GAAc,IAAI,CAAC;;IAkClC,CAAC;IAjCG,yCAAM,GAAN;QACI,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAChB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;SACtB;QACD,aAAK,CAAC,EAAE,CAAC,aAAK,CAAC,kBAAkB,EAAE,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAA;QACjE,aAAK,CAAC,EAAE,CAAC,aAAK,CAAC,cAAc,EAAE,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;IAC9D,CAAC;IACD,qDAAkB,GAAlB,UAAmB,CAAC;QAChB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IAC1B,CAAC;IACD,iDAAc,GAAd,UAAe,CAAU,EAAE,GAAY;QACnC,IAAI,IAAa,CAAC;QAClB,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;YAC1B,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;SAChC;aAAM;YACH,IAAI,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;SAC3C;QACD,IAAI,CAAC,YAAY,CAAC,oBAAU,CAAC,CAAC,SAAS,GAAG,GAAG,CAAC;QAC9C,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;QACpB,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QACjB,IAAI,CAAC,sBAAsB,CAAC,WAAW,CAAC,eAAe,CAAC,CAAC,aAAa,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;IAC1F,CAAC;IAEK,iDAAc,GAApB,UAAqB,IAAI;uCAAG,OAAO;;gBAC/B,sBAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;wBAC/B,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,MAAM,EAAE,UAAU,GAAG,EAAE,OAAO;4BACrD,OAAO,CAAC,OAAO,CAAC,CAAC;wBACrB,CAAC,CAAC,CAAA;oBACN,CAAC,CAAC,EAAC;;;KACN;IAGD,yCAAM,GAAN,UAAO,CAAC,IAAI,CAAC;IAjCb;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;iEACU;IALb,wBAAwB;QAD5C,OAAO;OACa,wBAAwB,CAuC5C;IAAD,+BAAC;CAvCD,AAuCC,CAvCqD,EAAE,CAAC,SAAS,GAuCjE;kBAvCoB,wBAAwB","file":"","sourceRoot":"/","sourcesContent":["import { Msger } from \"./Msger\";\nimport DelayDelSc from \"./DelayDelSc\";\n\n// Learn TypeScript:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class SplinteringConctrollerSc extends cc.Component {\n\n    // LIFE-CYCLE CALLBACKS:\n\n    @property(cc.Prefab)\n    splintering: cc.Prefab = null;\n    onLoad() {\n        if (!this.nodeSave) {\n            this.nodeSave = [];\n        }\n        Msger.on(Msger.on_Splintering_del, this.on_Splintering_del, this)\n        Msger.on(Msger.on_clean_brick, this.on_clean_brick, this);\n    }\n    on_Splintering_del(e) {\n        this.nodeSave.push(e);\n    }\n    on_clean_brick(p: cc.Node, pos: cc.Vec2) {\n        let node: cc.Node;\n        if (this.nodeSave.length > 0) {\n            node = this.nodeSave.shift();\n        } else {\n            node = cc.instantiate(this.splintering);\n        }\n        node.getComponent(DelayDelSc).delayTime = 0.4;\n        node.position = pos;\n        p.addChild(node);\n        node.getComponentInChildren(dragonBones.ArmatureDisplay).playAnimation(\"fk-tx-fk\", 1);\n    }\n\n    async loadPrefabSync(file): Promise<any> {\n        return new Promise((resolve, reject) => {\n            cc.loader.loadRes(file, cc.Prefab, function (err, content) {\n                resolve(content);\n            })\n        });\n    }\n    nodeSave: cc.Node[];\n\n    update(t) { }\n}\n"]}