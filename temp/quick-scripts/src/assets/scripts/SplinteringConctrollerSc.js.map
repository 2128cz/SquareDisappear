{"version":3,"sources":["assets\\scripts\\SplinteringConctrollerSc.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,iCAAgC;AAChC,2CAAsC;AAEtC,oBAAoB;AACpB,kFAAkF;AAClF,yFAAyF;AACzF,mBAAmB;AACnB,4FAA4F;AAC5F,mGAAmG;AACnG,8BAA8B;AAC9B,4FAA4F;AAC5F,mGAAmG;AAE7F,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAsD,4CAAY;IAAlE;QAEI,wBAAwB;QAF5B,qEAuCC;QAlCG,iBAAW,GAAc,IAAI,CAAC;;IAkClC,CAAC;IAjCG,yCAAM,GAAN;QACI,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAChB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;SACtB;QACD,aAAK,CAAC,EAAE,CAAC,aAAK,CAAC,kBAAkB,EAAE,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,CAAA;QACjE,aAAK,CAAC,EAAE,CAAC,aAAK,CAAC,cAAc,EAAE,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;IAC9D,CAAC;IACD,qDAAkB,GAAlB,UAAmB,CAAC;QAChB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IAC1B,CAAC;IACD,iDAAc,GAAd,UAAe,CAAU,EAAE,GAAY;QACnC,IAAI,IAAa,CAAC;QAClB,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;YAC1B,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;SAChC;aAAM;YACH,IAAI,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;SAC3C;QACD,IAAI,CAAC,YAAY,CAAC,oBAAU,CAAC,CAAC,SAAS,GAAG,GAAG,CAAC;QAC9C,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;QACpB,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QACjB,IAAI,CAAC,sBAAsB,CAAC,WAAW,CAAC,eAAe,CAAC,CAAC,aAAa,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;IAC1F,CAAC;IAEK,iDAAc,GAApB,UAAqB,IAAI;uCAAG,OAAO;;gBAC/B,sBAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;wBAC/B,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,MAAM,EAAE,UAAU,GAAG,EAAE,OAAO;4BACrD,OAAO,CAAC,OAAO,CAAC,CAAC;wBACrB,CAAC,CAAC,CAAA;oBACN,CAAC,CAAC,EAAC;;;KACN;IAGD,yCAAM,GAAN,UAAO,CAAC,IAAI,CAAC;IAjCb;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;iEACU;IALb,wBAAwB;QAD5C,OAAO;OACa,wBAAwB,CAuC5C;IAAD,+BAAC;CAvCD,AAuCC,CAvCqD,EAAE,CAAC,SAAS,GAuCjE;kBAvCoB,wBAAwB","file":"","sourceRoot":"/","sourcesContent":["import { Msger } from \"./Msger\";\r\nimport DelayDelSc from \"./DelayDelSc\";\r\n\r\n// Learn TypeScript:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class SplinteringConctrollerSc extends cc.Component {\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    @property(cc.Prefab)\r\n    splintering: cc.Prefab = null;\r\n    onLoad() {\r\n        if (!this.nodeSave) {\r\n            this.nodeSave = [];\r\n        }\r\n        Msger.on(Msger.on_Splintering_del, this.on_Splintering_del, this)\r\n        Msger.on(Msger.on_clean_brick, this.on_clean_brick, this);\r\n    }\r\n    on_Splintering_del(e) {\r\n        this.nodeSave.push(e);\r\n    }\r\n    on_clean_brick(p: cc.Node, pos: cc.Vec2) {\r\n        let node: cc.Node;\r\n        if (this.nodeSave.length > 0) {\r\n            node = this.nodeSave.shift();\r\n        } else {\r\n            node = cc.instantiate(this.splintering);\r\n        }\r\n        node.getComponent(DelayDelSc).delayTime = 0.4;\r\n        node.position = pos;\r\n        p.addChild(node);\r\n        node.getComponentInChildren(dragonBones.ArmatureDisplay).playAnimation(\"fk-tx-fk\", 1);\r\n    }\r\n\r\n    async loadPrefabSync(file): Promise<any> {\r\n        return new Promise((resolve, reject) => {\r\n            cc.loader.loadRes(file, cc.Prefab, function (err, content) {\r\n                resolve(content);\r\n            })\r\n        });\r\n    }\r\n    nodeSave: cc.Node[];\r\n\r\n    update(t) { }\r\n}\r\n"]}